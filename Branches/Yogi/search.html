<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Search Results</title>

    <!--Template based on URL below-->
    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/starter-template/">

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <!-- Place your stylesheet here-->
    <link href="search.css" rel="stylesheet" type="text/css">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>


     <div class="container">
        <div class="form-row " id="user_login">
            <div class="col-12">
            <div id="firebaseui-auth-container"></div>
                <div id="loader">Loading...</div>
            </div>
        </div>

    <!--Navigation bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="index.html">SpaceShare</a>
        <button class="navbar-toggler" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <form>
                <div class="form-group">
                    <input type="text" class="form-control" id="autocomplete"  placeholder="898 W 37th Avenue">
                    <i class="fas fa-search"></i>
                </div>
                </form>
        <div class="collapse navbar-collapse justify-content-end">
            <ul class="navbar-nav">
                <li class="nav-item  active">
                    <a class="nav-link" href="#">Become a Sharer <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="faq.html">Help</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link modal_trigger" href="#user_login"> Sign up</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link modal_trigger" href="#user_login">Login</a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Main Content -->
        <div id="cards-container">
            <!--<div class = "listing">
                <img src = "e91a3dcf-c15a-441a-b369-996922364cdc-profile_image-300x300.png" alt="black-image">
                <div class="listing-content">   
                    <p id="city1"><span class = "listing-heads">City</span>: Vancouver</p>
                    <p id="dimesions1"><span class = "listing-heads">Dimensions</span>: 20 x 30 x 40 sq.ft</p>
                    <p id="availability1"><span class = "listing-heads">Availability</span>: From _____ To _____</p>
                    <p id="price1"><span class = "listing-heads">Price</span>: 20$ per month</p>
                </div>    
             </div>
            <div class = "listing">
                <img src = "e91a3dcf-c15a-441a-b369-996922364cdc-profile_image-300x300.png" alt="black-image">
                <div class="listing-content">
                    <p id="address2"><span class = "listing-heads">Address</span>: 898 W 37th Avenue</h6>      
                    <p id="city2"><span class = "listing-heads">City</span>: Vancouver</p>
                    <p id="dimesions2"><span class = "listing-heads">Dimensions</span>: 20 x 30 x 40 sq.ft</p>
                    <p id="availability2"><span class = "listing-heads">Availability</span>: From _____ To _____</p>
                    <p id="price2"><span class = "listing-heads">Price</span>: 20$ per month</p>
                </div>
            </div>
            <div class = "listing">
                <img src = "e91a3dcf-c15a-441a-b369-996922364cdc-profile_image-300x300.png">
                <div class="listing-content">
                    <p id="address"><span class = "listing-heads">Address</span>: 898 W 37th Avenue</h6>      
                    <p id="city"><span class = "listing-heads">City</span>: Vancouver</p>
                    <p id="province"></p>
                    <p id="dimesions"><span class = "listing-heads">Dimensions</span>: 20 x 30 x 40 sq.ft</p>
                    <p id="availability"><span class = "listing-heads">Availability</span>: From _____ To _____</p>
                    <p id="price"><span class = "listing-heads">Price</span>: 20$ per month</p>
                </div>
            </div>
        -->
        </div>
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


    <script>
        $(document).ready(function() {

            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyCE2lSLszDUyZEyY--btpdoYs7Ln6PHAXY",
                authDomain: "spaceshare-b68f7.firebaseapp.com",
                databaseURL: "https://spaceshare-b68f7.firebaseio.com",
                projectId: "spaceshare-b68f7",
                storageBucket: "",
                messagingSenderId: "555750963802"
            };


            firebase.initializeApp(config);
            console.log(firebase);

            var db = firebase.database();
            var query = db.ref('/ListingsTest/');
           // var keys = db.ref('/ListingsTest/' + userUID);

            console.log(query);

            query.on('value', snapshot => {
                console.log(snapshot.val());
            });
            /* Iterates through the ListingsTest object and then creates as many divs 
            as there are listings*/
            query.on('value', function(snapshot) {
                snapshot.forEach(function (childSnapshot) {
                    var cityInput = childSnapshot.val().City;
                    var addressInput = childSnapshot.val().Address;
                    var heightInput = childSnapshot.val().Height;
                    var lengthInput = childSnapshot.val().Length;
                    var widthInput = childSnapshot.val().Width;
                    var provinceInput = childSnapshot.val().Province;

                    var listing = $("<div class = \"listing\"></div>")
                    $("#cards-container").append(listing);

                    var img = $("<img src = \"e91a3dcf-c15a-441a-b369-996922364cdc-profile_image-300x300.png\" alt = \"black-image\"></img>")
                    listing.append(img)

                    var listingContent = $("<div class = \"listing-content\"></div>")
                    listingContent.appendTo(listing);
                    
                    var province = $("<p class = \"province\"></p>");
                    province.text("Province: " + provinceInput);

                    var city = $("<p class = \"city\"></p>");
                    city.text("City: " + cityInput);

                    
                    var address = $("<p class = \"address\"></p>");
                    address.text("Address: " + addressInput);

                    var length = $("<p class = \"length\"></p>");
                    length.text("Length: " + lengthInput);

                    var height = $("<p class = \"height\"></p>");
                    height.text("Height: " + heightInput);

                    var width = $("<p class = \"width\"></p>");
                    width.text("Width: " + widthInput);

                    listingContent.append(province, city, address, length, width, height);


                    
                

            });
        });
    });
        
        </script>